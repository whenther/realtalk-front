/**
 * jQuery WillPop
 * @overview A library of pop-up related jQuery plugin functions
 * @version 1.0.0
 * @author Will Lee-Wagner <will@whentheresawill.net>
 * @license MIT <http://opensource.org/licenses/mit-license.php>
 */

(function(e){(function(){function i(){var n='<style class="jquery-pop">      body {margin:0;}      .pop-overlay {          background-color:'+r.overlayColorFallback+";          background-color:"+r.overlayColor+";          position: fixed;          top:0;          left:0;          width: 100%;          height: 100%;          z-index: 99;          display: none;      }      .pop-container {          position: relative;          background-color:"+r.containerColorFallback+";          background-color:"+r.containerColor+";          top: 50%;          left:50%;          width: "+r.popWidth+"px;          margin-left: -"+r.popWidth/2+"px;          overflow-x: hidden;          color:"+r.textColor+";          text-align: center;          font-family:"+r.fontFamilies+";      }      .pop {          width: 90%;          height:100%;          margin: 0 auto;      }      .pop .email-form input, textarea {color: #242424;}      @media screen and (max-width: "+(r.popWidth+t)+"px) {        .pop-overlay {background-color: none;}        .pop-container {            background-color:"+r.mobileColorFallback+";            background-color:"+r.mobileColor+";            top: 0;            left:0;            width: 100%;            height: 100%;            margin-top: 0;            margin-left: 0;        .pop-container {          overflow-y: hidden;          height: inherit;          margin-top: 0;        }      }</style>";e("head").append(n)}function s(){n.show();var t=n.find(".pop").height(),r=e(window).height(),i,s;n.hide();if(t>r){i=r;s="overlay"}else if(t<400){i=400;s="hidden"}else{i=t;s="hidden"}e("head style.jquery-pop").before('<style class="jquery-pop-height">          .pop-container {            overflow-y: '+s+";            height: "+i+"px;            margin-top: "+"-"+i/2+"px;          }        </style>")}function o(){e("head style.jquery-pop-height").remove()}function u(){s();if(r.onOpen)r.onOpen(this);n.fadeIn("fast")}function a(){n.fadeOut("fast",function(){o();if(r.onClose)r.onClose(this)})}const t=100;var n=e('<div class="pop-overlay"><div class="pop-container"><div class="pop">'),r;e.fn.addCenterPop=function(s){r=e.extend(e.fn.addCenterPop.defaults,s||{});e("body").append(n);i();this.click(u);n.click(a);if(!r.innerClickClose){n.find(".pop-container").click(function(n){if(e(document).width()>r.popWidth+t)n.stopPropagation()})}return n.find(".pop")};e.fn.addCenterPop.defaults={overlayColorFallback:"rgb(100,100,100)",overlayColor:"rgba(0,0,0,0.5)",containerColorFallback:"rgb(30,30,30)",containerColor:"rgba(0,0,0,0.9)",mobileColorFallback:"rgb(70,70,70)",mobileColor:"rgba(0,0,0,0.7)",textColor:"white",fontFamilies:"sans-serif",popWidth:400,innerClickClose:false,onOpen:null,onClose:null}})();(function(){function a(){if(u.callback)u.callback()}function f(e){var t;if(u.className)t='<div class="'+u.className+'">'+e+"</div>";else t="<div>"+e+"</div>";return t}var t,n=5,r,i,s,o,u;e.fn.showCenteredMessage=function(l,c){u=e.extend(e.fn.showCenteredMessage.defaults,c||{});s=this.width();t=e(f(l)).css({"background-color":u.backColor,color:u.textColor,"font-family":u.fontFamilies,"text-align":"center","border-radius":"20px",position:"absolute",padding:n+"px","min-width":"100px","max-width":s-n*4+"px"});this.append(t);i=t.width();r=t.height();o={"margin-top":"-"+r/2+"px",top:"50%",left:"50%"};if(i>=s){o["margin-left"]="0";o["width"]=s+"px"}else{o["margin-left"]="-"+(i/2+n)+"px"}t.css(o).hide().fadeIn(u.fadeSpeed,function(){if(u.fadeOut){window.setTimeout(function(){t.fadeOut(u.fadeSpeed,function(){a();t.remove()})},u.fadeWait)}else{a()}});return this};e.fn.showCenteredMessage.defaults={backColorFallback:"rgb(30,30,30)",backColor:"rgba(0,0,0,0.5)",textColor:"white",fontFamilies:"sans-serif",fadeWait:"1000",fadeSpeed:"slow",className:null,fadeOut:true,callback:null}})();(function(){function r(){var t="";if(n.emailUrl){t+='<form class="email-form">';if(n.emailMsg){t+=' <p class="email-label">'+n.emailMsg+"</p>"}t+=""+'<input type="test" name="emailfrom" id="email-from" placeholder="Your email address"/>'+'<textarea name="email" id="email"></textarea>'+'<input class="email-submit" type="submit" value="Submit"/>'+"</form>"}if(n.socialUrls){t+='<div class="icon-container">';if(n.socialMsg){t+="<p>"+n.socialMsg+"</p>"}t+='<div class="icons">';for(var r in n.socialUrls){var i=r,s,o;if(e.isArray(n.socialUrls[r])){s=n.socialUrls[r][0],o=n.socialUrls[r][1]}else{s=n.socialUrls[r];o=i}t+='            <a class="icon" href="'+s+'" target="_blank">              <img src="'+n.socialDir+o+'.png" title="'+i+'">            </a>'}t+="</div></div>"}return t}function i(){var t='<style class="jquery-contact">        .pop a {text-decoration: none;}        .pop {font-size: 1.2em;}        /* email form */        .pop form {padding: 10px 0;}        .pop #email-from {          width: 100%;          font-size: 0.9em;        }        .pop .contact-warning {          background-color: '+n.warningColor+";        }        .pop .email-label {          padding: 10px 0;          margin: 0;        }        .pop textarea {          width: 100%;          max-width: 100%;          margin: 5px 0;          padding: 5px;          border:0;          height: 200px;          resize: none;          font-family: sans-serif;          font-size: 0.8em;          /* make padding internal */          -webkit-box-sizing: border-box;          -moz-box-sizing: border-box;          box-sizing: border-box;        }        .pop .submit {padding: 8px;}        .pop input {          border: 0;          padding: 3px;          margin: 5px auto;          display: block;          width: 100%;          font-size: 1.1em;          /* make padding internal */          -webkit-box-sizing: border-box;          -moz-box-sizing: border-box;          box-sizing: border-box;        }        /* Socail Media */        .pop .icon-container {          width: 100%;          padding-bottom: 10px;          text-align: center;        }        .pop .icons {          text-align: center;          width:100%;        }        .pop .icon {          display: inline-block;          zoom: 1;          *display: inline;          position: relative;          width:23%;          max-width:32px;          padding: 0 1%;        }        </style>";e("head").append(t)}function s(e){if(e){t.find(e).addClass("contact-warning");u("Please complete the email before sending.")}}function o(e){t.find(e).removeClass("contact-warning")}function u(e,n){t.showCenteredMessage(e,{callback:n})}function a(){var e,n="",r="",i=true;e=t.find("#email-from").val();if(!e.match(/.+@.+\..+/)){n="#email-from";i=false}else{r="#email-from"}if(t.find("#email").val()===""){if(n!=="")n+=", ";n+="#email";i=false}else{if(r!=="")r+=", ";r+="#email"}s(n);o(r);return i}function f(){if(n.testMode){console.log("Url: "+n.emailUrl);console.log(t.find(".email-form").serialize());u("Email sent!",p)}else{e.ajax({type:"POST",url:n.emailUrl,contentType:"application/json",data:t.find(".email-form").serialize(),success:function(e){if(e.sent){u("Email sent!",p)}else{a();if(e.message){u(e.message)}else{u("A server error occured. Please try again.")}}},error:function(e){u(e)}})}}function l(){e(this).stop().animate({width:"40px"},"fast")}function c(){e(this).stop().animate({width:"32px"},"fast")}function h(e){e.preventDefault();if(a()){f()}}function p(){var e="#email-from, #email";t.find(e).val("");o(e)}var t,n;e.fn.addContactPop=function(s){n=e.extend(e.fn.addContactPop.defaults,s||{});t=e("#contact").addCenterPop(s);t.append(r());i();t.find("form").submit(h);if(n.socialAnimate)t.find(".icon img").hover(l,c);return this};e.fn.addContactPop.defaults=e.extend(e.fn.addCenterPop.defaults,{emailUrl:null,emailMsg:null,warningColor:"#B20000",socialUrls:{},socialDefaultIcon:"link",socialAnimate:true,socialMsg:null,socialDir:"",testMode:false,crossDomain:false})})()})(jQuery)


$(function () {
  $('#contact').addContactPop({
    emailUrl: 'http://whentheresawill.net/contact/',
    emailMsg: 'Bugs, problems, feature requests? Email Will!',
    socialMsg: 'Find me on social media:',
    socialUrls: {
      twitter: 'http://twitter.com/Will_LW',
      github: 'http://github.com/whenther',
    },
    socialDir: '//whentheresawill.net/static/section/img/social_icons/',
    crossDomain: true
  });
});